---
import Layout from '@/layouts/Layout.astro'
import HotelDescription from '@/components/about_hotel/HotelDescription.astro'
import HotelServices from '@/components/about_hotel/HotelServices.astro'
import HotelPricing from '@/components/about_hotel/HotelPricing.astro'
import ContactForm from '@/components/main/ContactForm.astro'

import heroDesktop from '@/assets/images/about_hotel/hero-1.jpg'
import heroMobile from '@/assets/images/about_hotel/hero-1-mobile.jpg'
import starIcon from '@/assets/icons/star.svg'
import gallery1 from '@/assets/images/about_hotel/hero-gallery-1.jpg'
import gallery2 from '@/assets/images/about_hotel/hero-gallery-2.jpg'
import gallery3 from '@/assets/images/about_hotel/hero-gallery-3.jpg'
import gallery4 from '@/assets/images/about_hotel/hero-gallery-4.jpg'

const gallery = [
    {
        thumbnail: gallery1.src,
        full: gallery1.src, // TODO: заменить на полноразмерную версию
        width: 2000,
        height: 1333,
        alt: 'Вид на остров и виллы на воде',
    },
    {
        thumbnail: gallery2.src,
        full: gallery2.src, // TODO: заменить на полноразмерную версию
        width: 2000,
        height: 1333,
        alt: 'Пляж и бассейн отеля',
    },
    {
        thumbnail: gallery3.src,
        full: gallery3.src, // TODO: заменить на полноразмерную версию
        width: 2000,
        height: 1333,
        alt: 'Вид на остров с высоты',
    },
    {
        thumbnail: gallery4.src,
        full: gallery4.src, // TODO: заменить на полноразмерную версию
        width: 2000,
        height: 1333,
        alt: 'Гости отеля',
    },
]
---

<Layout title="GRAND PARK KODHIPPARU 5* - Глобус Тур">
    <section class="hero-section about-hotel-hero">
        <picture class="hero-bg">
            <source media="(max-width: 480px)" srcset={heroMobile.src} />
            <img src={heroDesktop.src} alt="" loading="eager" decoding="async" />
        </picture>

        <div class="hero-nav">
            <nav class="breadcrumb">
                <a href="/">Главная</a>
                <span class="breadcrumb-separator">/</span>
                <a href="#">Лучшие отели мира</a>
                <span class="breadcrumb-separator">/</span>
                <span class="breadcrumb-current">GRAND PARK KODHIPPARU 5*</span>
            </nav>

            <button class="back-button" onclick="history.back()">
                <span class="back-icon"></span>
                <span class="back-text">назад</span>
            </button>
        </div>

        <div class="hero-content">
            <h1 class="hotel-title">GRAND PARK KODHIPPARU 5*</h1>

            <div class="hotel-rating">
                <img src={starIcon.src} alt="star" />
                <img src={starIcon.src} alt="star" />
                <img src={starIcon.src} alt="star" />
                <img src={starIcon.src} alt="star" />
                <img src={starIcon.src} alt="star" />
            </div>

            <p class="hotel-location">Kodhipparu, North Male Atoll, Гиравару</p>
        </div>

        <div class="hotel-gallery-container">
            <div class="about-hotel-gallery swiper" data-gallery={JSON.stringify(gallery)}>
                <div class="hotel-gallery-wrapper swiper-wrapper">
                    {
                        gallery.map((image, index) => (
                            <div
                                class={`about-hotel-gallery-item swiper-slide ${index === 3 ? 'about-hotel-gallery-item-all' : ''}`}
                                data-pswp-src={image.full}
                                data-pswp-width={image.width}
                                data-pswp-height={image.height}
                                data-index={index}
                            >
                                <img src={image.thumbnail} alt={image.alt} />
                                {index === 3 && (
                                    <div class="gallery-overlay">
                                        <span class="gallery-text">все фото</span>
                                    </div>
                                )}
                            </div>
                        ))
                    }
                </div>
            </div>
        </div>
    </section>

    <HotelDescription />
    <HotelServices />
    <HotelPricing />
    <ContactForm />
</Layout>

<style lang="scss" is:global>
    .about-hotel-hero {
        @include adaptive(height, 923, 902);
        @include adaptive(padding-top, 445, 374);

        .hotel-title {
            @include font-kudry-sans;
            font-weight: 300;
            @include adaptive(font-size, 60, 58);
            line-height: 1.2;
            text-transform: uppercase;
            color: $color-main;
        }

        .hotel-rating {
            display: flex;
            align-items: center;
            @include adaptive(gap, 14, 10);
            @include adaptive(margin-top, 14, 4);

            img {
                @include adaptive(width, 39, 26);
                @include adaptive(height, 37, 25);
            }
        }

        .hotel-location {
            @include font-circe-regular;
            font-weight: 300;
            @include adaptive(font-size, 26, 18);
            line-height: 1.2;
            color: $color-main;
            @include adaptive(margin-top, 34, 38);
        }

        .hotel-gallery-container {
            position: relative;
            width: 100%;
            z-index: 2;
            @include adaptive(margin-bottom, -174, -148);
        }

        .about-hotel-gallery {
            position: relative;
            width: 100%;
            overflow: hidden;
            @include adaptive(min-height, 300, 250);
        }

        .hotel-gallery-wrapper {
            display: flex;
        }

        .about-hotel-gallery-item {
            position: relative;
            @include adaptive(width, 418, 350);
            @include adaptive(height, 247, 207);
            flex-shrink: 0;
            overflow: hidden;
            box-shadow: 0px 4px 30px 0px rgba(0, 0, 0, 0.5);
            cursor: pointer;

            img {
                width: 100%;
                height: 100%;
                object-fit: cover;
                transition: transform 0.3s;
                pointer-events: none;
            }

            &:hover img {
                transform: scale(1.05);
            }

            &-all {
                cursor: pointer;
            }
        }

        .gallery-overlay {
            @include abs-default;
            @include flex-center;
            background: rgba(0, 39, 63, 0.7);
            pointer-events: none;
        }

        .gallery-text {
            @include font-circe-regular;
            @include adaptive(font-size, 26.483, 20);
            line-height: 1.21;
            @include adaptive(letter-spacing, 2.6483, 2);
            text-transform: uppercase;
            color: white;
            text-align: center;
        }
    }

    .hero-nav {
        @include flex-start-between;
        flex-direction: column;
        @include adaptive(gap, 18, 12);
        position: absolute;
        @include adaptive(top, 284, 128);
        @include adaptive(left, 100, 15);

        .breadcrumb {
            display: flex;
            align-items: center;
            @include adaptive(gap, 10, 8);

            a,
            span {
                @include font-circe-regular;
                @include adaptive(font-size, 20, 18);
                line-height: 1.2;
                color: $color-main;
                text-decoration: none;
            }

            a:hover {
                opacity: 0.8;
            }

            .breadcrumb-separator {
                @include font-circe-regular;
                font-weight: 500;
                @include adaptive(font-size, 16, 14);
                line-height: 1.2;
            }

            .breadcrumb-current {
                opacity: 0.7;
            }
        }

        .back-button {
            @include flex-center;
            @include adaptive(gap, 27, 20);
            background: none;
            border: none;
            cursor: pointer;
            padding: 0;
            transition: all 0.3s;

            &:hover {
                opacity: 0.8;

                .back-icon {
                    transform: translateX(-5px);
                }
            }

            .back-icon {
                @include adaptive(width, 70, 55);
                @include adaptive(height, 70, 55);
                background-image: url('@/assets/icons/prev-accent.svg');
                background-size: contain;
                background-repeat: no-repeat;
                background-position: center;
                transition: transform 0.3s;
            }

            .back-text {
                @include font-circe-regular;
                @include adaptive(font-size, 18, 18);
                line-height: 1.2;
                @include adaptive(letter-spacing, 3.6, 3.6);
                text-transform: uppercase;
                color: white;
            }
        }
    }
</style>
