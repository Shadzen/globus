---
import type { ImageMetadata } from 'astro'
import starAccent from '@/assets/icons/star-alt-accent.svg'
import starGray from '@/assets/icons/star-alt-white.svg'

import photo1 from '@/assets/images/tourvisor/tour-search-photo-1.jpg'
import photo2 from '@/assets/images/tourvisor/tour-search-photo-2.jpg'
import photo3 from '@/assets/images/tourvisor/tour-search-photo-3.jpg'

interface Hotel {
    id: number
    image: ImageMetadata
    name: string
    stars: number
    location: string
    description: string
    rating: number
    priceFrom: number
}

const hotels: Hotel[] = [
    {
        id: 1,
        image: photo1,
        name: 'Crystal Plaza 2*',
        stars: 2,
        location: 'Шарджа',
        description: 'Приятный семейный отель в центре Шарджи. Рядом магазины, торговые центры, золотой рынок. Хороший пакет услуг, неплохой ресторан. Для неспешного отдыха.',
        rating: 3.8,
        priceFrom: 35290,
    },
    {
        id: 2,
        image: photo2,
        name: 'Al Maha Regency Suites 3*',
        stars: 3,
        location: 'Шарджа',
        description: 'Отель в самом сердце Шарджи с видом на лагуну Кинг Халед, в нескольких минутах от основных торговых центров города, культурных и развлекательных центров. Для гостей — современные апартаменты с мини-кухней, ресторан международной кухни.',
        rating: 3.7,
        priceFrom: 67516,
    },
    {
        id: 3,
        image: photo3,
        name: 'Comfort Inn 3*',
        stars: 3,
        location: 'Дубай',
        description: 'Красивый и удобный семейный апарт-отель рядом со станцией метро, в пешей доступности торговые центры, магазины, кофейни. Уютные апартаменты с хорошей меблировкой, приветливый персонал. Для спокойного отдыха.',
        rating: 4.1,
        priceFrom: 77149,
    },
]
---

<section class="tour-results-section">
    <div class="tour-results-container">
        {hotels.map((hotel) => (
            <div class="hotel-card">
                <div class="hotel-image">
                    <img src={hotel.image.src} alt={hotel.name} loading="lazy" decoding="async" />
                </div>

                <div class="hotel-info">
                    <div class="hotel-header">
                        <div class="hotel-stars">
                            {Array.from({ length: 5 }).map((_, index) => (
                                <img
                                    src={index < hotel.stars ? starAccent.src : starGray.src}
                                    alt=""
                                    class="star-icon"
                                />
                            ))}
                        </div>
                        <h3 class="hotel-name">{hotel.name}</h3>
                        <p class="hotel-location">{hotel.location}</p>
                    </div>

                    <p class="hotel-description">{hotel.description}</p>

                    <div class="hotel-actions">
                        <button class="action-btn">Об отеле</button>
                        <button class="action-btn">Отзывы</button>
                        <button class="action-btn">Карта</button>
                        <button class="action-btn">Номера</button>
                    </div>
                </div>

                <div class="hotel-booking">
                    <div class="hotel-rating">
                        <span class="rating-label">Рейтинг</span>
                        <span class="rating-value">{hotel.rating}</span>
                    </div>

                    <div class="hotel-price">
                        <div class="price-label-row">
                            <span class="price-label">Цена от</span>
                        </div>
                        <div class="price-value-row">
                            <span class="price-value">{hotel.priceFrom.toLocaleString('ru-RU')}</span>
                            <span class="price-currency">₽</span>
                        </div>
                        <span class="price-note">за номер</span>
                    </div>

                    <button class="book-button">Выбрать</button>
                </div>

                <div class="card-divider"></div>
            </div>
        ))}
    </div>
</section>

<style lang="scss" is:global>
    .tour-results-section {
        // @include adaptive(margin-top, 0, 0);
        background-color: #FFFDF8;

        .tour-results-container {
            width: 100%;
        }

        .hotel-card {
            @include side-paddings;
            @include adaptive(padding-top, 60, 40);
            @include adaptive(padding-bottom, 60, 40);
            display: grid;
            position: relative;

            @include desktop {
                grid-template-columns: 273px 1fr auto;
                @include adaptive(gap, 45, 30);
                align-items: start;
            }

            @include mobile {
                grid-template-columns: 1fr;
                @include adaptive(gap, 30, 20);
            }
        }

        .hotel-image {
            @include adaptive(width, 273, 100%);
            @include adaptive(height, 179, 200);
            overflow: hidden;

            img {
                width: 100%;
                height: 100%;
                object-fit: cover;
                display: block;
            }
        }

        .hotel-info {
            display: flex;
            flex-direction: column;
            @include adaptive(gap, 30, 20);
        }

        .hotel-header {
            display: flex;
            flex-direction: column;
            @include adaptive(gap, 10, 8);
        }

        .hotel-stars {
            display: flex;
            @include adaptive(gap, 6, 4);
            align-items: center;
        }

        .star-icon {
            @include adaptive(width, 20, 16);
            @include adaptive(height, 20, 16);
            display: block;
        }

        .hotel-name {
            @include font-kudry-sans;
            @include adaptive(font-size, 28, 24);
            line-height: 1.2;
            text-transform: uppercase;
            color: $color-alternate;
            font-weight: 300;
            margin: 0;
        }

        .hotel-location {
            @include font-circe-light;
            @include adaptive(font-size, 18, 16);
            line-height: 1.2;
            color: #8C9DA4;
            margin: 0;
        }

        .hotel-description {
            @include font-circe-light;
            @include adaptive(font-size, 26, 18);
            line-height: 1.2;
            color: $color-alternate;
            margin: 0;
            max-width: 993px;
        }

        .hotel-actions {
            display: flex;
            @include adaptive(gap, 15, 10);
            flex-wrap: wrap;
        }

        .action-btn {
            @include adaptive(height, 54, 44);
            @include adaptive(padding-left, 45, 30);
            @include adaptive(padding-right, 45, 30);
            border: 2px solid $color-accent;
            border-radius: 500px;
            background-color: transparent;
            @include font-circe-regular;
            @include adaptive(font-size, 16, 14);
            line-height: 1.6;
            letter-spacing: 0.2em;
            text-transform: uppercase;
            color: $color-alternate;
            cursor: pointer;
            transition: all 0.3s ease;

            &:hover {
                background-color: rgba(204, 168, 112, 0.1);
            }
        }

        .hotel-booking {
            display: flex;
            flex-direction: column;
            @include adaptive(gap, 40, 30);
            align-items: flex-end;

            @include mobile {
                align-items: flex-start;
            }
        }

        .hotel-rating {
            display: flex;
            flex-direction: column;
            @include adaptive(gap, 10, 8);
            align-items: flex-end;

            @include mobile {
                align-items: flex-start;
            }
        }

        .rating-label {
            @include font-circe-light;
            @include adaptive(font-size, 18, 16);
            line-height: 1.2;
            color: $color-alternate;
        }

        .rating-value {
            font-family: 'Circe', sans-serif;
            @include adaptive(font-size, 47, 36);
            line-height: 1.3;
            letter-spacing: -0.02em;
            color: #1A202C;
            font-weight: 400;
        }

        .hotel-price {
            display: flex;
            flex-direction: column;
            @include adaptive(gap, 10, 8);
            align-items: flex-end;

            @include mobile {
                align-items: flex-start;
            }
        }

        .price-label-row {
            display: flex;
            align-items: center;
        }

        .price-label {
            @include font-circe-light;
            @include adaptive(font-size, 18, 16);
            line-height: 1.2;
            color: $color-alternate;
        }

        .price-value-row {
            display: flex;
            align-items: baseline;
            @include adaptive(gap, 8, 6);
        }

        .price-value {
            font-family: 'Circe', sans-serif;
            @include adaptive(font-size, 47, 36);
            line-height: 1.3;
            letter-spacing: -0.02em;
            color: #1A202C;
            font-weight: 400;
        }

        .price-currency {
            font-family: 'Circe', sans-serif;
            @include adaptive(font-size, 19, 16);
            line-height: 1.3;
            color: #1A202C;
            text-transform: uppercase;
            font-weight: 400;
        }

        .price-note {
            @include font-circe-light;
            @include adaptive(font-size, 18, 16);
            line-height: 1.2;
            color: $color-alternate;
        }

        .book-button {
            background-color: $color-accent;
            border: 1px solid $color-accent;
            border-radius: 500px;
            @include adaptive(height, 60, 50);
            @include adaptive(padding-left, 50, 30);
            @include adaptive(padding-right, 50, 30);
            @include font-circe-regular;
            @include adaptive(font-size, 16, 14);
            line-height: 1.6;
            letter-spacing: 0.2em;
            text-transform: uppercase;
            color: #FFFDF8;
            cursor: pointer;
            transition: all 0.3s ease;

            &:hover {
                // background-color: darken(#CCA870, 10%);
            }
        }

        .card-divider {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 1px;
            // background-color: rgba(0, 39, 63, 0.2);
            @include side-paddings;

            &::after {
                content: '';
                display: block;
                height: 100%;
                background-color: $color-accent;;
            }
        }
    }
</style>
