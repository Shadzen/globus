---
// src/components/common/Footer.astro
import Logo from './Logo.astro'
import upWhiteIcon from '@/assets/icons/up-white.svg'

interface Props {
    userType?: 'tourist' | 'agent'
}

const { userType = 'tourist' } = Astro.props
const base = import.meta.env.BASE_URL
---

<footer>
    <div class="footer-container">
        <div class="footer-columns">
            <div class="footer-column">
                <h3 class="footer-title">Глобус тур</h3>
                <nav class="footer-nav">
                    <a href={`${base}${userType}/news`}>Глобус-News</a>
                    <a href={`${base}${userType}/about`}>О нас</a>
                    <a href={`${base}${userType}/tour_search`}>Поиск туров</a>
                    <a href="#">Авиабилеты</a>
                    {userType === 'agent' && (
                        <a href="#">Документы</a>
                    )}
                </nav>
            </div>

            <div class="footer-column">
                <h3 class="footer-title">Путешествия</h3>
                <nav class="footer-nav">
                    <a href="#">Семейный отдых</a>
                    <a href="#">Активный отдых</a>
                    <a href="#">Мероприятия</a>
                    <a href={`${base}tourist/concierge_service`}>Консьерж-сервис</a>
                    {userType === 'agent' && (
                        <>
                            <a href="#">Страны</a>
                            <a href="#">Рекламные туры</a>
                        </>
                    )}
                </nav>
            </div>

            <div class="footer-column">
                <h3 class="footer-title">Полезное</h3>
                <nav class="footer-nav">
                    {userType === 'tourist' ? (
                        <>
                            <a href={`${base}tourist/visas`}>Визы</a>
                            <a href={`${base}tourist/insurance`}>Страхование</a>
                        </>
                    ) : (
                        <>
                            <a href="#">Бонусная программа</a>
                            <a href={`${base}agent/selfie_travel`}>Selfie travel</a>
                            <a href="#">Обучение</a>
                            <a href={`${base}agent/partner`}>Партнерам</a>
                            <a href="#">Финансовые гарантии</a>
                        </>
                    )}
                </nav>
            </div>

            <div class="footer-column">
                <Logo color="dark" size="small" userType={userType} />
                <button
                    class="scroll-top-btn"
                    onclick="window.scrollTo({ top: 0, behavior: 'smooth' })"
                >
                    <img src={upWhiteIcon.src} alt="" class="scroll-icon" />
                    <span>Наверх</span>
                </button>
            </div>
        </div>
        <div class="footer-columns">
            <div class="footer-column">
                <a href={`${base}tourist/payment_methods`} class="footer-link">Способы оплаты</a>
            </div>
            <div class="footer-column">
                <a href={`${base}tourist/privacy_policy`} class="footer-link">Политика конфиденциальности</a>
            </div>
            <div class="footer-column">
                <a href={`${base}tourist/user_agreement`} class="footer-link">Пользовательское соглашение</a>
            </div>
            <div class="footer-column">
                <div class="footer-legal">
                    <p>©2026 ООО туристическое агентство "Глобус тур"</p>
                    <p>
                        Все предложения находящиеся на сайте не являются публичной офертой.
                        Опубликовано в рекламных целях.
                    </p>
                </div>
            </div>
        </div>
    </div>
</footer>

<script src="@/scripts/gsap.ts"></script>
<script src="@/scripts/main.ts"></script>

<style lang="scss" is:global>
    footer {
        position: relative;
        width: 100%;
        background: $color-main;
        @include adaptive(padding-top, 120, 60);
        @include adaptive(padding-bottom, 30, 20);
        @include side-paddings;
        z-index: 1;

        .footer-container {
            position: relative;
            width: 100%;
            display: flex;
            flex-direction: column;
        }

        .footer-columns {
            display: flex;
            @include adaptive(gap, 28, 24);
            width: 100%;

            @include mobile {
                flex-direction: column;

                &:nth-child(1) {
                    .footer-column {
                        &:nth-child(1) {
                            order: 2;
                        }

                        &:nth-child(2) {
                            order: 3;
                        }

                        &:nth-child(3) {
                            order: 4;
                        }

                        &:nth-child(4) {
                            order: 1;
                            flex-direction: row;
                            justify-content: space-between;
                        }
                    }
                }

                &:nth-child(2) {
                    @include adaptive(margin-top, 0.01, 40);
                }
            }
        }

        .footer-column {
            display: flex;
            flex-direction: column;
            @include adaptive(gap, 18, 10);
            width: 22%;
            &:last-child {
                flex: 1;
            }

            @include mobile {
                width: 100%;
            }
        }

        .footer-title {
            @include font-kudry-sans;
            @include adaptive(font-size, 22, 26);
            font-weight: 300;
            line-height: 1.2;
            color: $color-accent;
            text-transform: uppercase;
            @include adaptive(margin-top, 20, 20);
            margin-bottom: 0;
        }

        .footer-nav {
            display: flex;
            flex-direction: column;
            flex: 1;
            @include adaptive(gap, 20, 16);
            @include adaptive(margin-top, 24, 6);

            a {
                @include font-circe-regular;
                @include adaptive(font-size, 16, 18);
                line-height: 1.6;
                color: $color-alternate;
                text-transform: uppercase;
                @include adaptive(letter-spacing, 3.2, 3.2);
                opacity: 0.6;
                text-decoration: none;
                transition: opacity 0.3s;

                &:hover {
                    opacity: 1;
                }
            }
        }

        .scroll-top-btn {
            @include button-default;
            @include adaptive(width, 186, 192);
            @include adaptive(height, 66, 64);
        }

        .scroll-icon {
            @include adaptive(width, 40, 32);
            @include adaptive(height, 40, 32);
        }

        .footer-link {
            @include font-circe-regular;
            @include adaptive(font-size, 16, 18);
            line-height: 1.6;
            color: $color-accent;
            text-transform: uppercase;
            @include adaptive(letter-spacing, 3.2, 3.2);
            transition: opacity 0.3s;
            white-space: normal;
            width: 50%;
            @include adaptive(margin-top, 80, 15);

            &:hover {
                opacity: 0.8;
            }

            @include mobile {
                width: 100%;
                margin-top: 0;
            }
        }

        .footer-legal {
            display: flex;
            justify-content: flex-end;
            flex-direction: column;
            flex: 1;

            p {
                position: relative;
                @include font-circe-regular;
                @include adaptive(font-size, 16, 18);
                line-height: 1;
                color: $color-alternate;
                @include adaptive(letter-spacing, -0.32, 0.01);
                opacity: 0.6;
                &:last-child {
                    @include adaptive(top, 20, 15);

                    @include mobile {
                        top: 0;
                    }
                }

                @include mobile {
                    line-height: 1.6;
                }
            }
        }
    }
</style>
