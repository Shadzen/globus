---
// src/components/main/TourCollections.astro
import { Image } from 'astro:assets'
import type { ImageMetadata } from 'astro'
import collectionTour1 from '@/assets/images/main/collection-tour-1.jpg'
import collectionTour2 from '@/assets/images/main/collection-tour-2.jpg'
import collectionTour3 from '@/assets/images/main/collection-tour-3.jpg'
import collectionTour4 from '@/assets/images/main/collection-tour-4.jpg'
import collectionTour5 from '@/assets/images/main/collection-tour-5.jpg'
import SwiperNavButtons from '@/components/SwiperNavButtons.astro'

interface TourCard {
    id: number
    title: string
    image: ImageMetadata
    position: 1 | 2 | 3 | 4
    font: 'circe' | 'kudry'
}

const cards: TourCard[] = [
    {
        id: 1,
        title: 'У океана',
        image: collectionTour1,
        position: 2,
        font: 'circe',
    },
    {
        id: 2,
        title: 'В горах',
        image: collectionTour2,
        position: 3,
        font: 'circe',
    },
    {
        id: 3,
        title: 'В джунглях',
        image: collectionTour3,
        position: 1,
        font: 'circe',
    },
    {
        id: 4,
        title: 'В мегаполисе',
        image: collectionTour4,
        position: 4,
        font: 'kudry',
    },
    {
        id: 5,
        title: 'У океана',
        image: collectionTour5,
        position: 2,
        font: 'kudry',
    },
    {
        id: 6,
        title: 'В мегаполисе',
        image: collectionTour4,
        position: 4,
        font: 'kudry',
    },
    {
        id: 7,
        title: 'У океана',
        image: collectionTour5,
        position: 2,
        font: 'kudry',
    },
]
---

<section class="tour-collections">
    <div class="tour-collections-container">
        <div class="collections-header">
            <h2 class="collections-title">Коллекция туров</h2>

            <SwiperNavButtons containerClass="collections-nav" />
        </div>

        <div class="collections-grid-wrapper swiper">
            <div class="collections-grid swiper-wrapper">
                {
                    cards.map((card) => (
                        <a href="#" class={`tour-card swiper-slide _pos-${card.position}`}>
                            <span class="card-image">
                                <Image
                                    src={card.image}
                                    alt={card.title}
                                    loading="lazy"
                                    quality={100}
                                />
                                <span class="card-overlay" />
                                <span
                                    class={`card-title _font-${card.font === 'circe' ? 'circle' : 'kudry'}`}
                                >
                                    {card.title}
                                </span>
                            </span>
                        </a>
                    ))
                }
            </div>
        </div>
    </div>
</section>

<style lang="scss" is:global>
    .tour-collections {
        background: $color-main;
        @include adaptive(margin-top, 128, 40);

        .tour-collections-container {
            position: relative;
            width: 100%;
            @include flex-center;
            flex-direction: column;
            @include adaptive(gap, 40, 40);
        }

        .collections-header {
            position: relative;
            width: 100%;
        }

        .collections-nav {
            @include center-y;
            @include adaptive(right, 100, 0);
        }

        .collections-grid-wrapper {
            position: relative;
            width: 100%;
            overflow: hidden;
        }

        .collections-grid {
            position: relative;
            width: 100%;
            display: flex;
            align-items: flex-start;
        }

        .tour-card {
            @include flex-center;
            position: relative;
            flex-shrink: 0;
            cursor: pointer;
            transition: transform 0.3s;
            height: auto;
            @include adaptive(max-width, 317, 260);

            &:hover {
                transform: translateY(-8px);

                .card-overlay {
                    background-color: rgba(0, 0, 0, 0.6) !important;
                }
            }

            &._pos-1 {
                margin-top: 0;
            }
            &._pos-2 {
                @include adaptive(margin-top, 30, 15);
            }
            &._pos-3 {
                @include adaptive(margin-top, 100, 60);
            }
            &._pos-4 {
                @include adaptive(margin-top, 130, 90);
            }
        }

        .card-image {
            position: relative;
            width: 100%;
            overflow: hidden;
        }

        .card-image img {
            display: block;
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .card-overlay {
            @include abs-default;
            transition: background-color 0.3s;
        }

        .card-title {
            @include center-xy;
            line-height: 1.2;
            color: #fff;
            text-transform: uppercase;
            text-align: center;
            &._font-circle {
                @include font-circe-regular;
                @include adaptive(font-size, 24, 18);
                @include adaptive(letter-spacing, 2.4, 1.8);
                font-weight: 400;
            }
            &._font-kudry {
                @include font-kudry-sans;
                @include adaptive(font-size, 28, 24);
                font-weight: 300;
            }
        }
    }
</style>
