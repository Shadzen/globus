---
import { Image } from 'astro:assets'
import type { ImageMetadata } from 'astro'
import SwiperNavButtons from '@/components/common/SwiperNavButtons.astro'

import newsImage1 from '@/assets/images/news/main-news-small-1.jpg'
import newsImage2 from '@/assets/images/news/main-news-small-2.jpg'
import newsImage3 from '@/assets/images/news/main-news-small-3.jpg'
import newsImage4 from '@/assets/images/news/main-news-small-4.jpg'

interface Props {
    userType?: 'tourist' | 'agent'
}

const { userType = 'tourist' } = Astro.props
const base = import.meta.env.BASE_URL

interface NewsSlide {
    id: number
    image: ImageMetadata
    category: string
    title: string
    slug: string
}

const newsSlides: NewsSlide[] = [
    {
        id: 1,
        image: newsImage1,
        category: 'Туры',
        title: 'Авторские туры\nв составе мини-группы',
        slug: 'author-tours-mini-group',
    },
    {
        id: 2,
        image: newsImage2,
        category: 'Отели',
        title: 'Вьетнам: Топ-5 отелей Нячанга на «Все включено»',
        slug: 'vietnam-nha-trang-all-inclusive',
    },
    {
        id: 3,
        image: newsImage3,
        category: 'Отели',
        title: 'Турция: Открыт новый отель Regnum The Crown 5*!',
        slug: 'turkey-regnum-crown-hotel',
    },
    {
        id: 4,
        image: newsImage4,
        category: 'Страны',
        title: 'Madinat Jumeirah - курорт для тех, кто выбирает только лучшее.',
        slug: 'madinat-jumeirah-resort',
    },
    {
        id: 5,
        image: newsImage3,
        category: 'Отели',
        title: 'Турция: Открыт новый отель Regnum The Crown 5*!',
        slug: 'turkey-regnum-crown-hotel',
    },
]
---

<section class="news-slider-section">
    <div class="container">
        <div class="slider-header">
            <h2 class="slider-title">может быть интересно</h2>
            <SwiperNavButtons containerClass="news-slider-nav" />
        </div>

        <div class="news-slider-wrapper swiper">
            <div class="news-slider swiper-wrapper">
                {
                    newsSlides.map((slide) => (
                        <div class="news-slide swiper-slide">
                            <a
                                href={`${base}${userType}/news/${slide.slug}/`}
                                class="news-slide-link"
                            >
                                <div class="news-slide-image">
                                    <Image
                                        src={slide.image}
                                        alt={slide.title}
                                        loading="lazy"
                                        quality={100}
                                    />
                                </div>
                                <div class="news-slide-content">
                                    <span class="news-slide-category">{slide.category}</span>
                                    <h3 class="news-slide-title">{slide.title}</h3>
                                </div>
                            </a>
                        </div>
                    ))
                }
            </div>
        </div>
    </div>
</section>

<style lang="scss" is:global>
    .news-slider-section {
        @include adaptive(margin-top, 80, 40);
        // @include adaptive(padding-top, 64, 40);
        // @include adaptive(padding-bottom, 100, 60);

        .container {
            width: 100%;
        }

        .slider-header {
            display: flex;
            align-items: center;
            justify-content: center;
            @include adaptive(gap, 32, 20);
            // @include adaptive(margin-bottom, 56, 32);
            position: relative;
            @include side-paddings;

            @include mobile {
                flex-direction: column;
            }
        }

        .slider-title {
            @include font-kudry-sans;
            @include adaptive(font-size, 60, 36);
            line-height: 1.21;
            text-transform: uppercase;
            color: $color-alternate;
            text-align: center;
            font-weight: 300;
        }

        .news-slider-nav {
            @include center-y;
            @include adaptive(right, 100, 15);
        }

        .news-slider-wrapper {
            overflow: hidden;
            width: 100%;
            @include adaptive(padding-top, 40, 20);
            // @include adaptive(padding-bottom, 40, 20);
        }

        .news-slider {
            display: flex;
        }

        .news-slide {
            position: relative;
            display: flex;
            flex-direction: column;
            flex-shrink: 0;
            @include adaptive(max-width, 418, 290);
        }

        .news-slide-link {
            display: flex;
            flex-direction: column;
            text-decoration: none;
            width: 100%;
            transition: transform 0.3s ease;

            &:hover {
                transform: translateY(-5px);

                // .news-slide-image img {
                //     transform: scale(1.05);
                // }
            }
        }

        .news-slide-image {
            position: relative;
            width: 100%;
            @include adaptive(height, 280, 240);
            overflow: hidden;
            @include adaptive(margin-bottom, 24, 16);

            img {
                width: 100%;
                height: 100%;
                object-fit: cover;
                // transition: transform 0.5s ease;
            }
        }

        .news-slide-content {
            display: flex;
            flex-direction: column;
            @include adaptive(gap, 12, 8);
        }

        .news-slide-category {
            @include font-circe-regular;
            @include adaptive(font-size, 16, 14);
            line-height: 1.6;
            @include adaptive(letter-spacing, 3.2, 2.8);
            text-transform: uppercase;
            color: $color-globus-light-blue;
        }

        .news-slide-title {
            @include font-kudry-sans;
            @include adaptive(font-size, 28, 22);
            line-height: 1.2;
            text-transform: uppercase;
            color: $color-alternate;
            font-weight: 300;
            white-space: pre-line;
        }
    }
</style>
