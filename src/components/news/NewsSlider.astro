---
import { Image } from 'astro:assets'
import type { ImageMetadata } from 'astro'
import SwiperNavButtons from '@/components/common/SwiperNavButtons.astro'

import newsImage1 from '@/assets/images/news/main-news-small-1.jpg'
import newsImage2 from '@/assets/images/news/main-news-small-2.jpg'
import newsImage3 from '@/assets/images/news/main-news-small-3.jpg'
import newsImage4 from '@/assets/images/news/main-news-small-4.jpg'

interface Props {
    userType?: 'tourist' | 'agent'
}

const { userType = 'tourist' } = Astro.props
const base = import.meta.env.BASE_URL

interface NewsSlide {
    id: number
    image: ImageMetadata
    category: string
    title: string
    slug: string
}

const newsSlides: NewsSlide[] = [
    {
        id: 1,
        image: newsImage1,
        category: 'Туры',
        title: 'Авторские туры\nв составе мини-группы',
        slug: 'author-tours-mini-group',
    },
    {
        id: 2,
        image: newsImage2,
        category: 'Отели',
        title: 'Вьетнам: Топ-5 отелей Нячанга на «Все включено»',
        slug: 'vietnam-nha-trang-all-inclusive',
    },
    {
        id: 3,
        image: newsImage3,
        category: 'Отели',
        title: 'Турция: Открыт новый отель Regnum The Crown 5*!',
        slug: 'turkey-regnum-crown-hotel',
    },
    {
        id: 4,
        image: newsImage4,
        category: 'Страны',
        title: 'Madinat Jumeirah - курорт для тех, кто выбирает только лучшее.',
        slug: 'madinat-jumeirah-resort',
    },
    {
        id: 5,
        image: newsImage3,
        category: 'Отели',
        title: 'Турция: Открыт новый отель Regnum The Crown 5*!',
        slug: 'turkey-regnum-crown-hotel',
    },
]
---

<section class="news-slider-section">
    <div class="section-container _overflow-cards">
        <div class="section-header">
            <h2>может быть интересно</h2>
            <SwiperNavButtons />
        </div>

        <div class="cards-bottom-grid-wrapper swiper">
            <div class="cards-bottom-grid swiper-wrapper">
                {
                    newsSlides.map((slide) => (
                        <a href={`${base}${userType}/news/${slide.slug}/`} class="card _interactive _second swiper-slide">
                            <span class="card-image">
                                <Image
                                    src={slide.image}
                                    alt={slide.title}
                                    loading="lazy"
                                    quality={100}
                                />
                            </span>
                            <span class="card-content">
                                <span class="card-category">{slide.category}</span>
                                <h3 class="card-title" set:html={slide.title} />
                            </span>
                        </a>
                    ))
                }
            </div>
        </div>
    </div>
</section>

<style lang="scss" is:global>
    .news-slider-section {
        @include adaptive(margin-top, 120, 60);

        .section-container {
            gap: 0 !important;
        }

        .swiper-nav {
            @include center-y;
            @include adaptive(right, 100, 15);
        }

        .card._second {
            @include adaptive(max-width, 418, 290);
        }
    }
</style>
