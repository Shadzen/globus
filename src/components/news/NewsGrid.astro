---
import type { ImageMetadata } from 'astro'
import Image from 'astro/components/Image.astro'
import photo1 from '@/assets/images/news/news-page-photo-1.jpg'
import photo2 from '@/assets/images/news/news-page-photo-2.jpg'
import photo3 from '@/assets/images/news/news-page-photo-3.jpg'
import photo4 from '@/assets/images/news/news-page-photo-4.jpg'
import photo5 from '@/assets/images/news/news-page-photo-5.jpg'
import photo6 from '@/assets/images/news/news-page-photo-6.jpg'

interface Props {
    userType?: 'tourist' | 'agent'
}

const { userType = 'tourist' } = Astro.props
const base = import.meta.env.BASE_URL

interface NewsItem {
    id: number
    image: ImageMetadata
    category: string
    date: string
    title: string
    slug: string
}

const newsItems: NewsItem[] = [
    {
        id: 1,
        image: photo1,
        category: 'Туры',
        date: '16 октября 2025',
        title: 'Саудовская Аравия: Туры на прямых рейсах из Москвы',
        slug: 'news_type_one',
    },
    {
        id: 2,
        image: photo2,
        category: 'Туры',
        date: '16 октября 2025',
        title: 'Турция приглашает на бархатный сезон!',
        slug: 'news_type_two',
    },
    {
        id: 3,
        image: photo3,
        category: 'Туры',
        date: '16 октября 2025',
        title: 'Мальдивы: Лучшие спецпредложения месяца',
        slug: 'news_type_four',
    },
    {
        id: 4,
        image: photo4,
        category: 'Туры',
        date: '16 октября 2025',
        title: 'Мальдивы: Лучшие спецпредложения месяца',
        slug: 'news_type_four',
    },
    {
        id: 5,
        image: photo5,
        category: 'Туры',
        date: '16 октября 2025',
        title: 'Мальдивы: Лучшие спецпредложения месяца',
        slug: 'news_type_four',
    },
    {
        id: 6,
        image: photo6,
        category: 'Туры',
        date: '16 октября 2025',
        title: 'Новый Год в Дубае',
        slug: 'news_type_three',
    },
]
---

<section class="news-grid-section">
    <div class="section-container">
        <div class="news-grid">
            {
                newsItems.map((item) => (
                    <a href={`${base}${userType}/${item.slug}/`} class="card _interactive">
                        <span class="card-image">
                            <Image src={item.image} alt={item.title} loading="lazy" quality={100} />
                            <span class="card-badge">
                                <span>{item.category}</span>
                            </span>
                        </span>
                        <span class="card-content">
                            <span class="card-date">{item.date}</span>
                            <h3 class="card-title" set:html={item.title} />
                        </span>
                    </a>
                ))
            }
        </div>
    </div>
</section>

<style lang="scss" is:global>
    .news-grid-section {
        @include adaptive(padding-top, 60, 40);

        .news-grid {
            @include adaptive(gap, 45, 20);

            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;

            @include mobile {
                flex-direction: column;
            }
        }

        .card {
            @include adaptive(max-width, 56%, 100%);
        }

        .card-badge {
            position: absolute;
            @include adaptive(top, 28, 20);
            @include adaptive(left, 28, 20);

            span {
                @include adaptive(font-size, 26, 18);
            }
        }
    }
</style>
