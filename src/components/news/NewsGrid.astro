---
import type { ImageMetadata } from 'astro'
import photo1 from '@/assets/images/news/news-page-photo-1.jpg'
import photo2 from '@/assets/images/news/news-page-photo-2.jpg'
import photo3 from '@/assets/images/news/news-page-photo-3.jpg'
import photo4 from '@/assets/images/news/news-page-photo-4.jpg'
import photo5 from '@/assets/images/news/news-page-photo-5.jpg'
import photo6 from '@/assets/images/news/news-page-photo-6.jpg'

interface Props {
    userType?: 'tourist' | 'agent'
}

const { userType = 'tourist' } = Astro.props
const base = import.meta.env.BASE_URL

interface NewsItem {
    id: number
    image: ImageMetadata
    category: string
    date: string
    title: string
    slug: string
}

const newsItems: NewsItem[] = [
    {
        id: 1,
        image: photo1,
        category: 'Туры',
        date: '16 октября 2025',
        title: 'Саудовская Аравия: Туры на прямых рейсах из Москвы',
        slug: 'news_type_one',
    },
    {
        id: 2,
        image: photo2,
        category: 'Туры',
        date: '16 октября 2025',
        title: 'Турция приглашает на бархатный сезон!',
        slug: 'news_type_two',
    },
    {
        id: 3,
        image: photo3,
        category: 'Туры',
        date: '16 октября 2025',
        title: 'Турция приглашает на бархатный сезон!',
        slug: 'news_type_three',
    },
    {
        id: 4,
        image: photo4,
        category: 'Туры',
        date: '16 октября 2025',
        title: 'Турция приглашает на бархатный сезон!',
        slug: 'news_type_one',
    },
    {
        id: 5,
        image: photo5,
        category: 'Туры',
        date: '16 октября 2025',
        title: 'Саудовская Аравия: Туры на прямых рейсах из Москвы',
        slug: 'news_type_two',
    },
    {
        id: 6,
        image: photo6,
        category: 'Туры',
        date: '16 октября 2025',
        title: 'Турция приглашает на бархатный сезон!',
        slug: 'news_type_three',
    },
]
---

<section class="news-grid-section">
    <div class="container">
        <div class="news-grid">
            {
                newsItems.map((item, index) => (
                    <a href={`${base}${userType}/${item.slug}/`} class={`news-card news-card-${index + 1}`}>
                        <div class="news-card-image">
                            <img src={item.image.src} alt={item.title} loading="lazy" />
                            <div class="news-card-overlay">
                                <span class="news-category">{item.category}</span>
                            </div>
                        </div>
                        <div class="news-card-content">
                            <time class="news-date">{item.date}</time>
                            <h3 class="news-title">{item.title}</h3>
                        </div>
                    </a>
                ))
            }
        </div>
    </div>
</section>

<style lang="scss" is:global>
    .news-grid-section {
        @include adaptive(padding-top, 60, 40);
        // @include adaptive(padding-bottom, 100, 60);

        .container {
            @include side-paddings;
            width: 100%;
        }

        .news-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            @include adaptive(gap, 45, 20);
            grid-auto-rows: auto;

            @include mobile {
                grid-template-columns: 1fr;
            }
        }

        .news-card {
            position: relative;
            display: flex;
            flex-direction: column;
            // text-decoration: none;
            // overflow: hidden;
            transition: transform 0.3s ease;

            &:hover {
                transform: translateY(-4px);

                // .news-card-image img {
                //     transform: scale(1.05);
                // }
            }

            // Специальные размеры для masonry layout
            &.news-card-1 {
                grid-column: 1 / 3;
                grid-row: 1 / 3;

                @include mobile {
                    grid-column: 1;
                    grid-row: auto;
                }

                .news-card-image {
                    @include adaptive(height, 676, 400);
                }
            }

            &.news-card-2 {
                grid-column: 3;
                grid-row: 1 / 2;

                @include mobile {
                    grid-column: 1;
                    grid-row: auto;
                }

                .news-card-image {
                    @include adaptive(height, 465, 300);
                }
            }

            &.news-card-3 {
                grid-column: 1;
                grid-row: 3;

                @include mobile {
                    grid-column: 1;
                    grid-row: auto;
                }

                .news-card-image {
                    @include adaptive(height, 349, 300);
                }
            }

            &.news-card-4 {
                grid-column: 1;
                grid-row: 4;

                @include mobile {
                    grid-column: 1;
                    grid-row: auto;
                }

                .news-card-image {
                    @include adaptive(height, 389, 300);
                }
            }

            &.news-card-5 {
                grid-column: 2 / 4;
                grid-row: 3 / 4;

                @include mobile {
                    grid-column: 1;
                    grid-row: auto;
                }

                .news-card-image {
                    @include adaptive(height, 389, 400);
                }
            }

            &.news-card-6 {
                grid-column: 2 / 4;
                grid-row: 4 / 6;

                @include mobile {
                    grid-column: 1;
                    grid-row: auto;
                }

                .news-card-image {
                    @include adaptive(height, 733, 400);
                }
            }
        }

        .news-card-image {
            position: relative;
            width: 100%;
            overflow: hidden;

            img {
                width: 100%;
                height: 100%;
                object-fit: cover;
                // transition: transform 0.5s ease;
            }
        }

        .news-card-overlay {
            position: absolute;
            @include adaptive(top, 28, 20);
            @include adaptive(left, 28, 20);
            z-index: 2;
        }

        .news-category {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            @include font-circe-light;
            @include adaptive(font-size, 26, 18);
            line-height: 1.2;
            color: $color-main;
            background-color: rgba(0, 0, 0, 0.4);
            border: 1px solid $color-accent;
            @include adaptive(padding-left, 45, 24);
            @include adaptive(padding-right, 45, 24);
            @include adaptive(padding-top, 14, 10);
            @include adaptive(padding-bottom, 14, 10);
            border-radius: 500px;
        }

        .news-card-content {
            @include adaptive(padding-top, 24, 16);
            display: flex;
            flex-direction: column;
            @include adaptive(gap, 12, 8);
        }

        .news-date {
            @include font-circe-regular;
            @include adaptive(font-size, 16, 14);
            line-height: 1.6;
            @include adaptive(letter-spacing, 3.2, 2.8);
            text-transform: uppercase;
            color: #667c89;
        }

        .news-title {
            @include font-kudry-sans;
            @include adaptive(font-size, 28, 22);
            line-height: 1.2;
            text-transform: uppercase;
            color: $color-alternate;
            font-weight: 300;
        }
    }
</style>
