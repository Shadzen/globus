---
// src/components/best_hotels/HotelsSlider.astro
import { Image } from 'astro:assets'
import type { ImageMetadata } from 'astro'
import SwiperNavButtons from '@/components/common/SwiperNavButtons.astro'
import gtRecommendsIcon from '@/assets/icons/gt-recommends.svg'

export interface Hotel {
    id: number
    name: string
    image: ImageMetadata
    price: string
    badge: string
    isRecommended?: boolean
    href?: string
}

interface Props {
    hotels: Hotel[]
}

const { hotels } = Astro.props
---

<div class="hotels-nav-wrapper">
    <SwiperNavButtons />
</div>

<div class="hotels-slider-wrapper swiper">
    <div class="hotels-slider swiper-wrapper">
        {
            hotels.map((hotel) => (
                <div class="hotel-card swiper-slide">
                    <a href={hotel.href} class="card _interactive">
                        <div class="card-image">
                            <Image
                                src={hotel.image}
                                alt={hotel.name}
                                loading="lazy"
                                quality={100}
                            />
                            <div class="card-badge">
                                <span>{hotel.badge}</span>
                            </div>
                            {hotel.isRecommended && (
                                <div class="hotel-recommended">
                                    <img src={gtRecommendsIcon.src} alt="GT рекомендует" />
                                </div>
                            )}
                        </div>
                        <div class="card-content">
                            <h3 class="card-title" set:html={hotel.name} />
                            <p class="card-price">{hotel.price}</p>
                        </div>
                    </a>
                    <button class="button _sized">Забронировать</button>
                </div>
            ))
        }
    </div>
</div>

<style lang="scss" is:global>
    .hotels-nav-wrapper {
        display: flex;
        justify-content: flex-end;
        @include adaptive(margin-top, 38, 0);
        @include side-paddings;
    }

    .hotels-slider-wrapper {
        position: relative;
        width: 100%;
        overflow: hidden;
        @include adaptive(padding-top, 34, 24);

        .hotels-slider {
            display: flex;
            align-items: stretch;

            .hotel-card {
                height: 100%;
                @include adaptive(width, 418, 322);
            }
        }
    }

    .hotels-slider-wrapper {
        .card-image {
            @include adaptive(height, 280, 216);
        }
    }

    .hotels-slider-wrapper,
    .hotels-grid {
        .hotel-card {
            flex-shrink: 0;
            display: flex;
            flex-direction: column;
            @include adaptive(gap, 32, 40);
        }

        .card-badge {
            position: absolute;
            @include adaptive(bottom, 20, 15);
            @include adaptive(left, 20, 15);
            @include adaptive(height, 44, 34);
        }

        .hotel-recommended {
            position: absolute;
            @include adaptive(top, 4, 2);
            @include adaptive(right, 4, 2);
            @include adaptive(width, 125, 70);
            @include adaptive(height, 125, 70);

            img {
                width: 100%;
                height: 100%;
                object-fit: contain;
            }
        }

        .card-title {
            @include adaptive(min-height, 67, 53);
        }

        .button {
            width: auto;
            align-self: flex-start;
            @include adaptive(width, 278, auto);
        }
    }
</style>
