---
// src/components/about/ContactsGrid.astro
import type { ImageMetadata } from 'astro'
import contactPhoto1 from '@/assets/images/about/contact-photo-1.jpg'

export interface ContactPerson {
    name: string
    position: string
    email: string
    phone: string
    image: ImageMetadata
}

interface Props {
    people?: ContactPerson[]
    standalone?: boolean
    title?: string
}

const defaultPeople: ContactPerson[] = [
    {
        name: 'Лавренчук Олеся',
        position: 'Заместитель директора по работе с клиентами',
        email: 'globus1@globus-tour.ru',
        phone: '+79130637740',
        image: contactPhoto1,
    },
    {
        name: 'Маковецкая Ульяна',
        position: 'Менеджер по туризму',
        email: 'globus40@globus-tour.ru',
        phone: '+79137907620',
        image: contactPhoto1,
    },
    {
        name: 'Курлович Снежана',
        position: 'Менеджер по туризму',
        email: 'globus38@globus-tour.ru',
        phone: '+79130637754',
        image: contactPhoto1,
    },
]

const { people = defaultPeople, standalone = false, title } = Astro.props
---

<div class:list={['contacts-grid', { '_standalone': standalone }]}>
    {title && (
        <h2 class="contacts-grid-title" set:html={title} />
    )}

    {
        people.map((person) => (
            <div class="contact-card">
                <div class="contact-avatar">
                    <img src={person.image.src} alt={person.name} loading="lazy" />
                </div>
                <div class="contact-info">
                    <div class="contact-info-top">
                        <h3 class="contact-name">{person.name}</h3>
                        <p class="contact-position">{person.position}</p>
                    </div>
                    <div class="contact-links">
                        <a href={`mailto:${person.email}`} class="contact-link">
                            {person.email}
                        </a>
                        <a href={`tel:${person.phone}`} class="contact-link">
                            {person.phone}
                        </a>
                    </div>
                </div>
            </div>
        ))
    }
</div>

<style lang="scss" is:global>
    .contacts-grid {
        @include adaptive(padding-top, 80, 40);
        @include adaptive(padding-bottom, 80, 40);
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        @include adaptive(column-gap, 60, 30);
        @include adaptive(row-gap, 80, 50);
        background-color: $color-globus-blue;

        &._standalone {
            @include side-paddings;
            @include adaptive(margin-top, 80, 40);
        }

        @include mobile {
            grid-template-columns: 1fr;
        }
    }

    .contacts-grid-title {
        color: $color-globus-cream;
        text-align: center;
        grid-column: 1 / -1;
    }

    .contact-card {
        display: flex;
        @include adaptive(gap, 30, 24);
    }

    .contact-avatar {
        @include adaptive(width, 115, 111);
        @include adaptive(height, 115, 111);
        border-radius: 50%;
        overflow: hidden;
        flex-shrink: 0;

        img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
        }
    }

    .contact-info {
        display: flex;
        flex-direction: column;
        @include adaptive(gap, 24, 24);
        flex: 1;
    }

    .contact-info-top {
        display: flex;
        flex-direction: column;
    }

    .contact-name {
        @include font-kudry-sans;
        @include adaptive(font-size, 28, 26);
        font-weight: 300;
        line-height: 1.2;
        color: $color-globus-sand;
        text-transform: uppercase;
        margin: 0;
        width: 50%;

        @include mobile {
            width: 100%;
        }
    }

    .contact-position {
        @include font-circe-light;
        @include adaptive(font-size, 26, 18);
        line-height: 1.2;
        color: $color-globus-light-blue;
        margin: 0;
    }

    .contact-links {
        display: flex;
        flex-direction: column;
        @include adaptive(gap, 5, 5);
        margin-top: auto;
    }

    .contact-link {
        @include font-circe-light;
        @include adaptive(font-size, 26, 18);
        line-height: 1.2;
        color: $color-globus-cream;
        text-decoration: none;
        transition: opacity 0.3s;

        &:hover {
            opacity: 0.7;
        }
    }
</style>
